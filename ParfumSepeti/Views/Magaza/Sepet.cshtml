@model SepetVM

<div class="panel p24-r vbox gap36 as-s">

    <h1 class="m0 text-center">Sepet</h1>

    <table class="table panel p16">

        <thead>
            <tr>
                <th class="color-primary text-l w90p">Ürün</th>
                <th class="color-primary text-l">Adet</th>
                <th class="color-primary text-l text-nowrap">
                    Birim Fiyat
                </th>
                <th class="color-primary text-l">Kaldır</th>
            </tr>
        </thead>

        <tbody>

            @foreach (var item in Model.Items)
            {
                <tr>
                    <td>
                        <a asp-action="Urun" asp-controller="Magaza" asp-route-id="@item.Id" class="text-nodec hbox ai-c gap12">
                            <img src="~/@item.KapakUrl" alt="kapak"
                             class="w64" />
                            <div class="text-nowrap">@item.Baslik</div>
                            <div class="text-nowrap">@item.Model</div>
                        </a>
                    </td>

                    <td>@item.Adet</td>

                    <td class="text-nowrap">@item.BirimFiyat TL</td>

                    <td>
                        <div class="hbox jc-c ai-c gap4">
                            <button onclick="sepettenKaldir(@item.Id);" class="fa fa-trash-alt text-xxl btn2-danger p8"></button>
                        </div>
                    </td>
                </tr>
            }

        </tbody>

    </table>

    <div class="hbox jc-end gap12">

        <div class="as-end ai-c panel hbox gap24 p8 border2">
            <span class="text-l">Toplam</span>
            <span class="text-xxl bold">@Model.Toplam TL</span>
        </div>

        <a asp-action="SiparisBilgi" class="btn-primary ph24 text-l bold">
            Siparişi Tamamla
        </a>

    </div>

</div>

<script>
    function sepettenKaldir(id) {

        fetch('/Magaza/SepettenKaldir', {
            method: 'POST',
            headers: {
                'Accept': 'application/json',
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ 'id': id })
        })

            .then(response => {
                if (response.ok) {
                    location.reload();
                    console.log('ok');
                } else {
                    console.log('bad request');
                }
            });
    }
</script>